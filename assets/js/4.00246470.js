(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{373:function(t,s,e){t.exports=e.p+"assets/img/debug(1)1.1608e168.jpg"},374:function(t,s,e){t.exports=e.p+"assets/img/debug(1)2.c5df4394.jpg"},375:function(t,s,e){t.exports=e.p+"assets/img/debug(1)3.89dba9ce.jpg"},376:function(t,s,e){t.exports=e.p+"assets/img/debug(1)4.cc076802.png"},377:function(t,s,e){t.exports=e.p+"assets/img/debug(1)5.4b1a60a0.jpg"},378:function(t,s,e){t.exports=e.p+"assets/img/debug(1)6.98c45f98.jpg"},379:function(t,s,e){t.exports=e.p+"assets/img/debug(1)7.023ab53b.png"},400:function(t,s,e){"use strict";e.r(s);var a=e(17),n=Object(a.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("移动端debug")]),t._v(" "),a("p",[t._v("最近在开发小程序中的过程中，需要对接口进行抓包了来denbug或者了解别的的小程序是怎么做的。\n"),a("br"),t._v("\n我的用的工具的是mac和charles进行抓包的\n"),a("br"),t._v("\n但是由于小程序的的接口都是https的，https是需要证书，所以抓包会比较复杂一些\n"),a("br"),t._v("\n第一步允许抓包443端口的请求\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(373)}}),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(374)}}),t._v(" "),a("br"),t._v("\n这里的星号代表是匹配所有的443端口的请求\n"),a("br"),t._v("\n第二步客户端下载ssl证书，\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(375)}}),t._v(" "),a("br"),t._v("\n第三步就是给手机信任证书，所以的请求才会被验证通过的。这里呢，由于安卓和ios的证书安装方式不同，我就分开介绍了。\n"),a("br"),t._v("\nios\n"),a("br"),t._v("\n设置 -> 通用 -> 关于本机 -> 证书信任设置\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(376)}}),t._v(" "),a("br"),t._v("\n安卓\n"),a("br"),t._v("\n安卓呢，就有点复杂了。安卓需要做些预热处理\n"),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("Android 调试桥 (adb) 是一个通用命令行工具，其允许您与模拟器实例或连接的 Android 设备进行通信。它可为各种设备操作提供便利，如安装和调试应用，并提供对 Unix shell（可用来在模拟器或连接的设备上运行各种命令）的访问")])]),t._v(" "),a("p",[t._v("那么开始安装adb吧。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("brew cask install android-platform-tools\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("adb devices 查看系统是否识别设备(List of devices attached 是没有识别到设备)\n")])])]),a("p",[t._v("当遇到没有识别到设备的情况时，有如下几种情况")]),t._v(" "),a("ol",[a("li",[t._v("电脑端的adb_usb文件内，并没有链接手机设备的id。\n"),a("br"),t._v("\nMAC终端下，命令行执行system_profiler SPUSBDataType，显示外接设备信息。里面找到Android的Vendor ID\n"),a("br"),t._v("\n然后将vendor id的值写入 /User/你对应的用户文件夹/.android/adb_usb.ini文件。若该文件不存在，则新建一个。\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(377)}})]),t._v(" "),a("li",[t._v("手机端未打开usb调试模式\n那我就根据我的米8来做例子去打开usb调试模式。先要开发者模式，打开usb调试。\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"120px"},attrs:{src:e(378)}}),t._v(" "),a("br"),t._v("\n以上adb就可以链接到手机了。\n"),a("br"),t._v("\n然后将第二步下载的证书，通过adb传送到手机。首先先切换到证书所在文件夹下")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("adb push charles-ssl-proxying-certificate.pem sdcard/charles.pem\n")])])]),a("p",[t._v("还是以米8为例子，我是在设置—>更多设置—>系统安全—>加密与凭据—>从存储设备安装从adb发送过来的pem文件\n"),a("br"),t._v("\n这里有个小说明：小米手机对sdcard文件的存取，做了安全限制。如果你没有设置屏幕锁，或者没有开启屏幕锁，操作sdcard文件时会出现上面的提示（具体可参见http://www.miui.com/thread-3244178-1-1.html）。这时，你需要设置一下屏幕锁，再重新安装一下就行了。\n"),a("br"),t._v("\n安装成功，就可以在手机的用户凭证那找到你刚安装的证书\n"),a("br"),t._v(" "),a("img",{staticStyle:{height:"300px"},attrs:{src:e(379)}}),t._v(" "),a("br"),t._v("\n以上就是抓包的总结了")])])},[],!1,null,null,null);s.default=n.exports}}]);